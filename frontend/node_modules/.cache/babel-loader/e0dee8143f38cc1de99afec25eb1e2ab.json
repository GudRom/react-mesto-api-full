{"ast":null,"code":"import _classCallCheck from\"C:/Users/\\u0420\\u043E\\u043C\\u0430\\u043D/Desktop/dev/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"C:/Users/\\u0420\\u043E\\u043C\\u0430\\u043D/Desktop/dev/react-mesto-api-full/frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";var Api=/*#__PURE__*/function(){function Api(_ref){var address=_ref.address,token=_ref.token;_classCallCheck(this,Api);this.address=address;this.token=token;}_createClass(Api,[{key:\"getUserInfo\",value:function getUserInfo(){var _this=this;return fetch(\"\".concat(this.address,\"/users/me\"),{headers:{authorization:this.token}}).then(function(res){return _this._checkResult(res);});}},{key:\"getCards\",value:function getCards(){var _this2=this;return fetch(\"\".concat(this.address,\"/cards\"),{headers:{authorization:this.token}}).then(function(res){return _this2._checkResult(res);});}},{key:\"addNewCard\",value:function addNewCard(data){var _this3=this;return fetch(\"\".concat(this.address,\"/cards\"),{method:'POST',headers:{authorization:this.token,'Content-Type':'application/json'},body:JSON.stringify({name:data.name,link:data.link})}).then(function(res){return _this3._checkResult(res);});}},{key:\"setUserInfo\",value:function setUserInfo(data){var _this4=this;return fetch(\"\".concat(this.address,\"/users/me\"),{method:'PATCH',headers:{authorization:this.token,'Content-Type':'application/json'},body:JSON.stringify({name:data.name,about:data.about})}).then(function(res){return _this4._checkResult(res);});}},{key:\"setUserAvatar\",value:function setUserAvatar(data){var _this5=this;return fetch(\"\".concat(this.address,\"/users/me/avatar\"),{method:'PATCH',headers:{authorization:this.token,'Content-Type':'application/json'},body:JSON.stringify({avatar:data.avatar})}).then(function(res){return _this5._checkResult(res);});}},{key:\"deleteCard\",value:function deleteCard(cardId){var _this6=this;return fetch(\"\".concat(this.address,\"/cards/\").concat(cardId),{method:'DELETE',headers:{authorization:this.token,'Content-Type':'application/json'}}).then(function(res){return _this6._checkResult(res);});}},{key:\"changeLikeCardStatus\",value:function changeLikeCardStatus(cardId,isNotLiked){var _this7=this;if(isNotLiked){return fetch(\"\".concat(this.address,\"/cards/\").concat(cardId,\"/likes\"),{method:'PUT',headers:{authorization:this.token,'Content-Type':'application/json'}}).then(function(res){return _this7._checkResult(res);});}else{return fetch(\"\".concat(this.address,\"/cards/\").concat(cardId,\"/likes\"),{method:'DELETE',headers:{authorization:this.token,'Content-Type':'application/json'}}).then(function(res){return _this7._checkResult(res);});}}},{key:\"_checkResult\",value:function _checkResult(res){if(res.ok){return res.json();}else{return Promise.reject(\"\\u041E\\u0448\\u0438\\u0431\\u043A\\u0430: \".concat(res.status));}}}]);return Api;}();var configK={address:'https://mesto.nomoreparties.co/v1/cohort-32',token:'e7c53c8e-b5d8-4719-b07e-61d4790752fd'};var api=new Api(configK);export default api;","map":{"version":3,"sources":["C:/Users/Роман/desktop/dev/react-mesto-api-full/frontend/src/utils/Api.js"],"names":["Api","address","token","fetch","headers","authorization","then","res","_checkResult","data","method","body","JSON","stringify","name","link","about","avatar","cardId","isNotLiked","ok","json","Promise","reject","status","configK","api"],"mappings":"+UAAMA,CAAAA,G,yBACF,kBAGG,IAFCC,CAAAA,OAED,MAFCA,OAED,CADCC,KACD,MADCA,KACD,2BACC,KAAKD,OAAL,CAAeA,OAAf,CACA,KAAKC,KAAL,CAAaA,KAAb,CACH,C,2CAED,sBAAc,gBACV,MAAOC,CAAAA,KAAK,WAAI,KAAKF,OAAT,cAA6B,CACjCG,OAAO,CAAE,CACLC,aAAa,CAAE,KAAKH,KADf,CADwB,CAA7B,CAAL,CAKFI,IALE,CAKG,SAAAC,GAAG,QAAI,CAAA,KAAI,CAACC,YAAL,CAAkBD,GAAlB,CAAJ,EALN,CAAP,CAMH,C,wBAED,mBAAW,iBACP,MAAOJ,CAAAA,KAAK,WAAI,KAAKF,OAAT,WAA0B,CAC9BG,OAAO,CAAE,CACLC,aAAa,CAAE,KAAKH,KADf,CADqB,CAA1B,CAAL,CAKFI,IALE,CAKG,SAAAC,GAAG,QAAI,CAAA,MAAI,CAACC,YAAL,CAAkBD,GAAlB,CAAJ,EALN,CAAP,CAMH,C,0BAED,oBAAWE,IAAX,CAAiB,iBACb,MAAON,CAAAA,KAAK,WAAI,KAAKF,OAAT,WAA0B,CAClCS,MAAM,CAAE,MAD0B,CAElCN,OAAO,CAAE,CACLC,aAAa,CAAE,KAAKH,KADf,CAEL,eAAgB,kBAFX,CAFyB,CAMlCS,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACjBC,IAAI,CAAEL,IAAI,CAACK,IADM,CAEjBC,IAAI,CAAEN,IAAI,CAACM,IAFM,CAAf,CAN4B,CAA1B,CAAL,CAWNT,IAXM,CAWD,SAAAC,GAAG,QAAI,CAAA,MAAI,CAACC,YAAL,CAAkBD,GAAlB,CAAJ,EAXF,CAAP,CAYH,C,2BAED,qBAAYE,IAAZ,CAAkB,iBACd,MAAON,CAAAA,KAAK,WAAI,KAAKF,OAAT,cAA6B,CACrCS,MAAM,CAAE,OAD6B,CAErCN,OAAO,CAAE,CACLC,aAAa,CAAE,KAAKH,KADf,CAEL,eAAgB,kBAFX,CAF4B,CAMrCS,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACjBC,IAAI,CAAEL,IAAI,CAACK,IADM,CAEjBE,KAAK,CAAEP,IAAI,CAACO,KAFK,CAAf,CAN+B,CAA7B,CAAL,CAWNV,IAXM,CAWD,SAAAC,GAAG,QAAI,CAAA,MAAI,CAACC,YAAL,CAAkBD,GAAlB,CAAJ,EAXF,CAAP,CAYH,C,6BAED,uBAAcE,IAAd,CAAoB,iBAChB,MAAON,CAAAA,KAAK,WAAI,KAAKF,OAAT,qBAAoC,CAC5CS,MAAM,CAAE,OADoC,CAE5CN,OAAO,CAAE,CACLC,aAAa,CAAE,KAAKH,KADf,CAEL,eAAgB,kBAFX,CAFmC,CAM5CS,IAAI,CAAEC,IAAI,CAACC,SAAL,CAAe,CACjBI,MAAM,CAAER,IAAI,CAACQ,MADI,CAAf,CANsC,CAApC,CAAL,CAUNX,IAVM,CAUD,SAAAC,GAAG,QAAI,CAAA,MAAI,CAACC,YAAL,CAAkBD,GAAlB,CAAJ,EAVF,CAAP,CAWH,C,0BAED,oBAAWW,MAAX,CAAmB,iBACf,MAAOf,CAAAA,KAAK,WAAI,KAAKF,OAAT,mBAA0BiB,MAA1B,EAAoC,CACxCR,MAAM,CAAE,QADgC,CAExCN,OAAO,CAAE,CACLC,aAAa,CAAE,KAAKH,KADf,CAEL,eAAgB,kBAFX,CAF+B,CAApC,CAAL,CAOFI,IAPE,CAOG,SAAAC,GAAG,QAAI,CAAA,MAAI,CAACC,YAAL,CAAkBD,GAAlB,CAAJ,EAPN,CAAP,CAQH,C,oCAED,8BAAqBW,MAArB,CAA6BC,UAA7B,CAAyC,iBACrC,GAAIA,UAAJ,CAAgB,CAChB,MAAOhB,CAAAA,KAAK,WAAI,KAAKF,OAAT,mBAA0BiB,MAA1B,WAA0C,CAC9CR,MAAM,CAAE,KADsC,CAE9CN,OAAO,CAAE,CACLC,aAAa,CAAE,KAAKH,KADf,CAEL,eAAgB,kBAFX,CAFqC,CAA1C,CAAL,CAOFI,IAPE,CAOG,SAAAC,GAAG,QAAI,CAAA,MAAI,CAACC,YAAL,CAAkBD,GAAlB,CAAJ,EAPN,CAAP,CAQC,CATD,IASO,CACH,MAAOJ,CAAAA,KAAK,WAAI,KAAKF,OAAT,mBAA0BiB,MAA1B,WAA0C,CAClDR,MAAM,CAAE,QAD0C,CAElDN,OAAO,CAAE,CACLC,aAAa,CAAE,KAAKH,KADf,CAEL,eAAgB,kBAFX,CAFyC,CAA1C,CAAL,CAONI,IAPM,CAOD,SAAAC,GAAG,QAAI,CAAA,MAAI,CAACC,YAAL,CAAkBD,GAAlB,CAAJ,EAPF,CAAP,CAQH,CACJ,C,4BAED,sBAAaA,GAAb,CAAkB,CACd,GAAIA,GAAG,CAACa,EAAR,CAAY,CACR,MAAOb,CAAAA,GAAG,CAACc,IAAJ,EAAP,CACH,CAFD,IAEO,CACH,MAAOC,CAAAA,OAAO,CAACC,MAAR,iDAA0BhB,GAAG,CAACiB,MAA9B,EAAP,CACH,CACJ,C,mBAGL,GAAMC,CAAAA,OAAO,CAAG,CACZxB,OAAO,CAAE,6CADG,CAEZC,KAAK,CAAE,sCAFK,CAAhB,CAKA,GAAMwB,CAAAA,GAAG,CAAG,GAAI1B,CAAAA,GAAJ,CAAQyB,OAAR,CAAZ,CACA,cAAeC,CAAAA,GAAf","sourcesContent":["class Api {\r\n    constructor({\r\n        address,\r\n        token\r\n    }) {\r\n        this.address = address;\r\n        this.token = token;\r\n    }\r\n\r\n    getUserInfo() {\r\n        return fetch(`${this.address}/users/me`, {\r\n                headers: {\r\n                    authorization: this.token\r\n                }\r\n            })\r\n            .then(res => this._checkResult(res))\r\n    }\r\n\r\n    getCards() {\r\n        return fetch(`${this.address}/cards`, {\r\n                headers: {\r\n                    authorization: this.token\r\n                }\r\n            })\r\n            .then(res => this._checkResult(res))\r\n    }\r\n\r\n    addNewCard(data) {\r\n        return fetch(`${this.address}/cards`, {\r\n            method: 'POST',\r\n            headers: {\r\n                authorization: this.token,\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                name: data.name,\r\n                link: data.link\r\n            })\r\n        })\r\n        .then(res => this._checkResult(res))\r\n    }\r\n\r\n    setUserInfo(data) {\r\n        return fetch(`${this.address}/users/me`, {\r\n            method: 'PATCH',\r\n            headers: {\r\n                authorization: this.token,\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                name: data.name,\r\n                about: data.about\r\n            })\r\n        })\r\n        .then(res => this._checkResult(res))\r\n    }\r\n\r\n    setUserAvatar(data) {\r\n        return fetch(`${this.address}/users/me/avatar`, {\r\n            method: 'PATCH',\r\n            headers: {\r\n                authorization: this.token,\r\n                'Content-Type': 'application/json'\r\n            },\r\n            body: JSON.stringify({\r\n                avatar: data.avatar\r\n            })\r\n        })\r\n        .then(res => this._checkResult(res))\r\n    }\r\n\r\n    deleteCard(cardId) {\r\n        return fetch(`${this.address}/cards/${cardId}`, {\r\n                method: 'DELETE',\r\n                headers: {\r\n                    authorization: this.token,\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            })\r\n            .then(res => this._checkResult(res))\r\n    }\r\n\r\n    changeLikeCardStatus(cardId, isNotLiked) {\r\n        if (isNotLiked) {\r\n        return fetch(`${this.address}/cards/${cardId}/likes`, {\r\n                method: 'PUT',\r\n                headers: {\r\n                    authorization: this.token,\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            })\r\n            .then(res => this._checkResult(res))\r\n        } else {\r\n            return fetch(`${this.address}/cards/${cardId}/likes`, {\r\n                method: 'DELETE',\r\n                headers: {\r\n                    authorization: this.token,\r\n                    'Content-Type': 'application/json'\r\n                }\r\n            })\r\n            .then(res => this._checkResult(res))\r\n        }\r\n    }\r\n\r\n    _checkResult(res) {\r\n        if (res.ok) {\r\n            return res.json()\r\n        } else {\r\n            return Promise.reject(`Ошибка: ${res.status}`)\r\n        }\r\n    }\r\n}\r\n\r\nconst configK = {\r\n    address: 'https://mesto.nomoreparties.co/v1/cohort-32',\r\n    token: 'e7c53c8e-b5d8-4719-b07e-61d4790752fd'\r\n}\r\n\r\nconst api = new Api(configK);\r\nexport default api;"]},"metadata":{},"sourceType":"module"}