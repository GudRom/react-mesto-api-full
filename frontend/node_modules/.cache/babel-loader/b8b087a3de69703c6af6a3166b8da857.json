{"ast":null,"code":"import _toConsumableArray from\"C:/Users/\\u0420\\u043E\\u043C\\u0430\\u043D/Desktop/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/\\u0420\\u043E\\u043C\\u0430\\u043D/Desktop/dev/react-mesto-auth/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from\"react\";import Footer from\"./Footer\";import Header from\"./Header\";import Main from\"./Main\";import ImagePopup from\"./ImagePopup\";import api from\"../utils/Api\";import{CurrentUserContext}from\"../contexts/CurrentUserContext\";import EditProfilePopup from\"./EditProfilePopup\";import EditAvatarPopup from\"./EditAvatarPopup\";import AddPlacePopup from\"./AddPlacePopup\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),isEditProfilePopupOpen=_React$useState2[0],setIsEditProfilePopupOpen=_React$useState2[1];var _React$useState3=React.useState(false),_React$useState4=_slicedToArray(_React$useState3,2),isAddPlacePopupOpen=_React$useState4[0],setIsAddPlacePopupOpen=_React$useState4[1];var _React$useState5=React.useState(false),_React$useState6=_slicedToArray(_React$useState5,2),isEditAvatarPopupOpen=_React$useState6[0],setIsEditAvatarPopupOpen=_React$useState6[1];var _React$useState7=React.useState(null),_React$useState8=_slicedToArray(_React$useState7,2),selectedCard=_React$useState8[0],setSelectedCard=_React$useState8[1];var _React$useState9=React.useState({}),_React$useState10=_slicedToArray(_React$useState9,2),currentUser=_React$useState10[0],setCurrentUser=_React$useState10[1];var _React$useState11=React.useState([]),_React$useState12=_slicedToArray(_React$useState11,2),cards=_React$useState12[0],setCards=_React$useState12[1];React.useEffect(function(){api.getCards().then(function(card){return setCards(card);}).catch(function(err){return console.log(err);});},[]);React.useEffect(function(){api.getUserInfo().then(function(info){return setCurrentUser(info);}).catch(function(err){return console.log(err);});},[]);function handleEditAvatarClick(){setIsEditAvatarPopupOpen(true);}function handleEditProfileClick(){setIsEditProfilePopupOpen(true);}function handleAddPlaceClick(){setIsAddPlacePopupOpen(true);}function handleCardCLick(card){setSelectedCard(card);}function closeAllPopups(){setIsEditAvatarPopupOpen(false);setIsAddPlacePopupOpen(false);setIsEditProfilePopupOpen(false);setSelectedCard(null);}function handleCardLike(card){// Снова проверяем, есть ли уже лайк на этой карточке\nvar isLiked=card.likes.some(function(user){return user._id===currentUser._id;});// Отправляем запрос в API и получаем обновлённые данные карточки\napi.changeLikeCardStatus(card._id,!isLiked).then(function(newCard){setCards(function(state){return state.map(function(c){return c._id===card._id?newCard:c;});});}).catch(function(err){return console.log(err);});}function handleCardDelete(card){// Отправляем запрос в API и удаляем карточку, создаем копию массива, исключив удаленную карточку\napi.deleteCard(card._id).then(function(){setCards(function(state){return state.filter(function(c){return c._id!==card._id;});});}).catch(function(err){return console.log(err);});}function handleUpdateUser(data){api.setUserInfo(data).then(function(info){setCurrentUser(info);closeAllPopups();}).catch(function(err){return console.log(err);});}function handleUpdateAvatar(data){api.setUserAvatar(data).then(function(info){setCurrentUser(info);closeAllPopups();}).catch(function(err){return console.log(err);});}function handleAddPlaceSubmit(data){api.addNewCard(data).then(function(newCard){setCards([newCard].concat(_toConsumableArray(cards)));closeAllPopups();}).catch(function(err){return console.log(err);});}return/*#__PURE__*/_jsxs(CurrentUserContext.Provider,{value:currentUser,children:[/*#__PURE__*/_jsx(Header,{}),/*#__PURE__*/_jsx(Main,{onEditAvatar:handleEditAvatarClick,onEditProfile:handleEditProfileClick,onAddPlace:handleAddPlaceClick,onCardClick:handleCardCLick,cards:cards,onCardLike:handleCardLike,onCardDelete:handleCardDelete}),/*#__PURE__*/_jsx(Footer,{}),/*#__PURE__*/_jsx(EditProfilePopup,{isOpen:isEditProfilePopupOpen,onClose:closeAllPopups,onUpdateUser:handleUpdateUser}),/*#__PURE__*/_jsx(AddPlacePopup,{isOpen:isAddPlacePopupOpen,onClose:closeAllPopups,onAddPlace:handleAddPlaceSubmit}),/*#__PURE__*/_jsx(EditAvatarPopup,{isOpen:isEditAvatarPopupOpen,onClose:closeAllPopups,onUpdateAvatar:handleUpdateAvatar}),/*#__PURE__*/_jsx(ImagePopup,{card:selectedCard,onClose:closeAllPopups})]});}export default App;","map":{"version":3,"sources":["C:/Users/Роман/desktop/dev/react-mesto-auth/src/components/App.js"],"names":["React","Footer","Header","Main","ImagePopup","api","CurrentUserContext","EditProfilePopup","EditAvatarPopup","AddPlacePopup","App","useState","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","selectedCard","setSelectedCard","currentUser","setCurrentUser","cards","setCards","useEffect","getCards","then","card","catch","err","console","log","getUserInfo","info","handleEditAvatarClick","handleEditProfileClick","handleAddPlaceClick","handleCardCLick","closeAllPopups","handleCardLike","isLiked","likes","some","user","_id","changeLikeCardStatus","newCard","state","map","c","handleCardDelete","deleteCard","filter","handleUpdateUser","data","setUserInfo","handleUpdateAvatar","setUserAvatar","handleAddPlaceSubmit","addNewCard"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport Footer from \"./Footer\";\nimport Header from \"./Header\";\nimport Main from \"./Main\";\nimport ImagePopup from \"./ImagePopup\";\nimport api from \"../utils/Api\";\nimport { CurrentUserContext } from \"../contexts/CurrentUserContext\";\nimport EditProfilePopup from \"./EditProfilePopup\";\nimport EditAvatarPopup from \"./EditAvatarPopup\";\nimport AddPlacePopup from \"./AddPlacePopup\";\n\nfunction App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] =\n    React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] =\n    React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState(null);\n  const [currentUser, setCurrentUser] = React.useState({});\n  const [cards, setCards] = React.useState([]);\n\n  React.useEffect(() => {\n    api\n      .getCards()\n      .then((card) => setCards(card))\n      .catch((err) => console.log(err));\n  }, []);\n\n  React.useEffect(() => {\n    api\n      .getUserInfo()\n      .then((info) => setCurrentUser(info))\n      .catch((err) => console.log(err));\n  }, []);\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleCardCLick(card) {\n    setSelectedCard(card);\n  }\n\n  function closeAllPopups() {\n    setIsEditAvatarPopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setSelectedCard(null);\n  }\n\n  function handleCardLike(card) {\n    // Снова проверяем, есть ли уже лайк на этой карточке\n    const isLiked = card.likes.some((user) => user._id === currentUser._id);\n\n    // Отправляем запрос в API и получаем обновлённые данные карточки\n    api\n      .changeLikeCardStatus(card._id, !isLiked)\n      .then((newCard) => {\n        setCards((state) =>\n          state.map((c) => (c._id === card._id ? newCard : c))\n        );\n      })\n      .catch((err) => console.log(err));\n  }\n\n  function handleCardDelete(card) {\n    // Отправляем запрос в API и удаляем карточку, создаем копию массива, исключив удаленную карточку\n    api\n      .deleteCard(card._id)\n      .then(() => {\n        setCards((state) => state.filter((c) => c._id !== card._id));\n      })\n      .catch((err) => console.log(err));\n  }\n\n  function handleUpdateUser(data) {\n    api\n      .setUserInfo(data)\n      .then((info) => {\n        setCurrentUser(info);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err));\n  }\n\n  function handleUpdateAvatar(data) {\n    api\n      .setUserAvatar(data)\n      .then((info) => {\n        setCurrentUser(info);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err));\n  }\n\n  function handleAddPlaceSubmit(data) {\n    api\n      .addNewCard(data)\n      .then((newCard) => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch((err) => console.log(err));\n  }\n\n  return (\n    <CurrentUserContext.Provider value={currentUser}>\n      <Header />\n      <Main\n        onEditAvatar={handleEditAvatarClick}\n        onEditProfile={handleEditProfileClick}\n        onAddPlace={handleAddPlaceClick}\n        onCardClick={handleCardCLick}\n        cards={cards}\n        onCardLike={handleCardLike}\n        onCardDelete={handleCardDelete}\n      />\n      <Footer />\n      <EditProfilePopup\n        isOpen={isEditProfilePopupOpen}\n        onClose={closeAllPopups}\n        onUpdateUser={handleUpdateUser}\n      />\n      <AddPlacePopup\n        isOpen={isAddPlacePopupOpen}\n        onClose={closeAllPopups}\n        onAddPlace={handleAddPlaceSubmit}\n      />\n      <EditAvatarPopup\n        isOpen={isEditAvatarPopupOpen}\n        onClose={closeAllPopups}\n        onUpdateAvatar={handleUpdateAvatar}\n      />\n      <ImagePopup card={selectedCard} onClose={closeAllPopups} />\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}